---
layout: post
title: 堆
date: 2021-05-30
categories: [leetcode]
tags: leetcode
---

> 堆是优先队列（Priority Queue）的实现，可以用于 动态选取 一个集合中的最值元素。堆通常指二叉堆，堆包括最大堆和最小堆：最大堆的每一个结点（除了根结点）的值不大于其父结点；最小堆的每一个结点（除了根结点）的值不小于其父结点。

```
python 有内置堆模块，可以堆list直接操作
import heapq
```

**方法：**
    堆操作：插入（叶子节点上调），删除（堆顶元素下沉）

    堆创建：非叶子节点下沉（从最后一个非叶子节点开始）

**最小堆：**

    最小堆任何一个父节点的值，都小于等于它左右孩子节点的值

    创建过程：如果非叶子节点值大于其子节点，将其下沉

**最大堆：**

    最大堆任何一个父节点的值，都大于等于它左右孩子节点的值。

    创建过程：如果非叶子节点值小于其子节点，将其下沉

**code：（最小堆）**
```
#最小堆
def upadjust(nums):
    childindex = len(nums)-1
    parentindex = (childindex-1)//2
    temp = nums[childindex] #插入的叶子节点值
    while childindex>0 and temp<nums[parentindex]:#子节点小于父节点，上调子节点
        nums[childindex] = nums[parentindex]
        childindex = parentindex
        parentindex = (parentindex-1)//2
    nums[childindex] = temp

def downadjust(nums,parentindex):
    temp = nums[parentindex]
    childindex = 2*parentindex + 1
    while childindex < len(nums):
        #右孩子值小于左孩子，父节点和小的交换
        if childindex +1 <len(nums) and nums[childindex+1] < nums[childindex]:
            childindex += 1
        if temp < nums[childindex]:    #父节点小于子节点，不用调整
            break
        nums[parentindex] = nums[childindex]
        parentindex = childindex
        childindex = childindex*2+1
    nums[parentindex] = temp

def buildMinHeap(nums):
    for i in range((len(nums)-1)//2,-1,-1):
        downadjust(nums,i)
```
